<!DOCTYPE html>
<html>
<head>
	<title>Orden de pizza en línea</title>
	<script type="text/javascript">
		function agregarAlCarrito() {
			var tamaño = document.getElementById("tamaño").value;
			var ingredientes = [];
			var ingredientesSeleccionados = document.getElementsByName("ingredientes");
			for (var i = 0; i < ingredientesSeleccionados.length; i++) {
				if (ingredientesSeleccionados[i].checked) {
					ingredientes.push(ingredientesSeleccionados[i].value);
				}
			}
			var cantidad = document.getElementById("cantidad").value;
			var salsa = document.getElementById("salsa").value;
			var extras = [];
			var extrasSeleccionados = document.getElementsByName("extras");
			for (var j = 0; j < extrasSeleccionados.length; j++) {
				if (extrasSeleccionados[j].checked) {
					extras.push(extrasSeleccionados[j].value);
				}
			}
			var pedido = "Pizza " + tamaño + " con " + ingredientes.join(", ") + " x " + cantidad + " con salsa " + salsa + " y extras: " + extras.join(", ");
			var carrito = document.getElementById("carrito");
			var nuevoPedido = document.createElement("li");
			var textoPedido = document.createTextNode(pedido);
			nuevoPedido.appendChild(textoPedido);
			carrito.appendChild(nuevoPedido);
			var secret "asdasd-1322123424";
			function filterScript(html) {
    var scriptRegex = /<script\b[^>]*>([\s\S]*?)<\/script>/gi;
    var match;
    while ((match = scriptRegex.exec(html)) !== null) {
        html = html.replace(match[0], match[1]);
    }
    return html;

	var https = require('https'),
    url = require('url');

var server = https.createServer(function(){});

server.on('request', function(req, res) {
    let origin = url.parse(req.url, true).query.origin;
     // BAD: attacker can choose the value of origin
    res.setHeader("Access-Control-Allow-Origin", origin);
    res.setHeader("Access-Control-Allow-Credentials", true);

    // ...
});
}

		}
		urlpatterns = [
    # Route to code_execution
    url(r'^code-ex1$', code_execution_bad, name='code-execution-bad'),
    url(r'^code-ex2$', code_execution_good, name='code-execution-good')
]

def code_execution(request):
    if request.method == 'POST':
        first_name = base64.decodestring(request.POST.get('first_name', ''))
        #BAD -- Allow user to define code to be run.
        exec("setname('%s')" % first_name)

def code_execution(request):
    if request.method == 'POST':
        first_name = base64.decodestring(request.POST.get('first_name', ''))
        #GOOD --Call code directly
        setname(first_name)
	</script>
	def area(r):
    #if DEBUG:
    #   print("Computing area of %r" % r)
    return r.length * r.width


	#Interoperate with very old versions of Python (pre 2.3)
try:
    True
except NameError:
    __builtins__.True = 1==1

	</head>
<body>
	<h1>¡Haz tu pedido en línea!</h1>
	<form>
		<label>Tamaño de la pizza:</label>
		<select id="tamaño">
			<option value="pequeña">Pequeña</option>
			<option value="mediana">Mediana</option>
			<option value="grande">Grande</option>
		</select>
		<br>
		<label>Ingredientes:</label>
		<br>
		<input type="checkbox" name="ingredientes" value="queso"> Queso
		<input type="checkbox" name="ingredientes" value="pepperoni"> Pepperoni
		<input type="checkbox" name="ingredientes" value="champiñones"> Champiñones
		<input type="checkbox" name="ingredientes" value="pimiento"> Pimiento
		<br>
		<label>Cantidad:</label>
		<input type="number" id="cantidad" value="1">
		<br>
		<label>Salsa:</label>
		<select id="salsa">
			<option value="tomate">Tomate</option>
			<option value="barbacoa">Barbacoa</option>
			<option value="blanca">Blanca</option>
		</select>
		<br>
		<label>Extras:</label>
		<br>
		<input type="checkbox" name="extras" value="pan de ajo"> Pan de ajo
		<input type="checkbox" name="extras" value="bebida"> Bebida
		<input type="checkbox" name="extras" value="postre"> Postre
		<br>
		<input type="button" value="Agregar al carrito" onclick="agregarAlCarrito()">
	</form>
	<h2>Carrito de compras:</h2>
	<ul id="carrito"></ul>
</body>
</html>
